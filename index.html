<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Coeur du Donjon</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1>âš”ï¸ Le Coeur du Donjon âš”ï¸</h1>
            <div class="subtitle">Un conte mÃ©diÃ©val et fantastique</div>
        </div>

        <div class="game-stats" id="gameStats" style="display: none;">
            <div class="stat-box">
                <div class="stat-label">Nom</div>
                <div class="stat-value" id="playerName">---</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Niveau</div>
                <div class="stat-value" id="playerLevel">1</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Or</div>
                <div class="stat-value" id="playerGold">0 ğŸ’°</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">SantÃ©</div>
                <div class="stat-value" id="playerHealth">100/100</div>
                <div class="health-bar">
                    <div class="health-fill" id="healthFill" style="width: 100%;"></div>
                </div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Force</div>
                <div class="stat-value" id="playerStrength">10</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">DÃ©fense</div>
                <div class="stat-value" id="playerDefense">5</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Ã‰nergie</div>
                <div class="stat-value" id="playerEnergy">100/100</div>
                <div class="health-bar">
                    <div class="health-fill" id="energyFill" style="width: 100%; background: linear-gradient(90deg, #FFD700 0%, #FFA500 100%);"></div>
                </div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ExpÃ©rience</div>
                <div class="stat-value" id="playerXP">0/100</div>
                <div class="xp-bar">
                    <div class="xp-fill" id="xpFill" style="width: 0%;"></div>
                </div>
            </div>
        </div>

        <div class="game-content">
            <!-- Start Screen -->
            <div id="startScreen" class="game-screen active">
                <div class="story-text">
                    <p>Bienvenue, brave aventurier !</p>
                    <p>Dans le royaume oubliÃ© de Valoria, les tÃ©nÃ¨bres s'Ã©tendent. Au coeur du donjon ancien se cache un artefact lÃ©gendaire - le Coeur du Donjon - capable de sauver le royaume.</p>
                    <p>Les lÃ©gendes racontent que seul un hÃ©ros courageux peut affronter les dangers qui gardent ce trÃ©sor mystique...</p>
                    <p>ÃŠtes-vous prÃªt Ã  devenir cette lÃ©gende ?</p>
                </div>
                <div>
                    <label for="nameInput" style="display: block; margin-bottom: 10px;">Entrez votre nom :</label>
                    <input type="text" id="nameInput" placeholder="Nom du hÃ©ros" maxlength="20">
                </div>
                <div class="game-actions">
                    <button onclick="startGame()">ğŸ—¡ï¸ Commencer l'Aventure</button>
                </div>
            </div>

            <!-- Main Game Screen -->
            <div id="mainScreen" class="game-screen">
                <div class="story-text">
                    <p>Vous vous tenez devant l'entrÃ©e du donjon. Les torches vacillent sur les murs de pierre ancienne. Que souhaitez-vous faire ?</p>
                </div>
                <div class="game-actions">
                    <button onclick="explore()">ğŸ—ºï¸ Explorer le Donjon</button>
                    <button onclick="showShop()">ğŸª Visiter le Marchand</button>
                    <button onclick="rest()">ğŸ›Œ Dormir Ã  l'Auberge</button>
                    <button onclick="showStats()">ğŸ“Š Voir Statistiques</button>
                </div>
            </div>

            <!-- Combat Screen -->
            <div id="combatScreen" class="game-screen">
                <div class="enemy-info" id="enemyInfo">
                    <h3 id="enemyName">Ennemi</h3>
                    <div class="stat-value" id="enemyHealth">HP: 50/50</div>
                    <div class="health-bar">
                        <div class="health-fill" id="enemyHealthFill" style="width: 100%;"></div>
                    </div>
                </div>
                <div class="combat-log" id="combatLog"></div>
                <div class="game-actions">
                    <button onclick="attack()">âš”ï¸ Attaquer</button>
                    <button onclick="defend()">ğŸ›¡ï¸ DÃ©fendre</button>
                    <button onclick="flee()">ğŸƒ Fuir</button>
                </div>
            </div>

            <!-- Shop Screen -->
            <div id="shopScreen" class="game-screen">
                <div class="story-text">
                    <p>Un vieux marchand vous accueille avec un sourire Ã©dentÃ©. "Bienvenue dans ma modeste Ã©choppe ! Jetez un oeil Ã  mes marchandises..."</p>
                </div>
                <div id="shopItems"></div>
                <div class="game-actions">
                    <button onclick="showMain()">ğŸšª Retour</button>
                </div>
            </div>

            <!-- Stats Screen -->
            <div id="statsScreen" class="game-screen">
                <div class="story-text">
                    <h3>ğŸ“Š Statistiques du HÃ©ros</h3>
                    <div id="detailedStats"></div>
                </div>
                <div class="game-actions">
                    <button onclick="showMain()">ğŸšª Retour</button>
                    <button onclick="showSaveOptions()">ğŸ’¾ Sauvegardes</button>
                    <button onclick="resetGame()" style="background: linear-gradient(135deg, #8B0000 0%, #660000 100%);">ğŸ”„ Nouvelle Partie</button>
                </div>
            </div>

            <!-- Save Options Screen -->
            <div id="saveOptionsScreen" class="game-screen">
                <div class="story-text">
                    <h3>ğŸ’¾ Gestion des Sauvegardes</h3>
                    <p>Votre partie est automatiquement sauvegardÃ©e dans votre navigateur. Utilisez les options ci-dessous pour gÃ©rer vos sauvegardes :</p>
                    
                    <div class="shop-item" style="display: block; margin-top: 20px;">
                        <h4 style="color: #DAA520;">ğŸ“¤ Exporter la Sauvegarde</h4>
                        <p>Obtenez un code de sauvegarde que vous pouvez copier et utiliser sur n'importe quel appareil.</p>
                        <button onclick="exportSave()" style="margin-top: 10px;">GÃ©nÃ©rer le Code</button>
                        <div id="exportResult" style="margin-top: 10px;"></div>
                    </div>
                    
                    <div class="shop-item" style="display: block; margin-top: 20px;">
                        <h4 style="color: #DAA520;">ğŸ“¥ Importer une Sauvegarde</h4>
                        <p>Entrez un code de sauvegarde pour restaurer votre progression.</p>
                        <input type="text" id="importCode" placeholder="Collez votre code ici" style="width: 100%; max-width: 100%;">
                        <button onclick="importSave()" style="margin-top: 10px;">Restaurer</button>
                        <div id="importResult" style="margin-top: 10px;"></div>
                    </div>
                    
                    <div class="shop-item" style="display: block; margin-top: 20px;">
                        <h4 style="color: #DAA520;">â˜ï¸ Sauvegarde Automatique</h4>
                        <p>Statut: <span id="autoSaveStatus" style="color: #51cf66;">âœ“ Active</span></p>
                        <p style="font-size: 0.9em; color: #999;">Les sauvegardes sont automatiquement enregistrÃ©es dans votre navigateur aprÃ¨s chaque action.</p>
                    </div>
                </div>
                <div class="game-actions">
                    <button onclick="showStats()">ğŸšª Retour</button>
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="victoryScreen" class="game-screen">
                <div class="story-text">
                    <h2 style="color: #DAA520; text-align: center; margin-bottom: 20px;">ğŸ† Victoire ! ğŸ†</h2>
                    <p>AprÃ¨s d'innombrables batailles, vous avez atteint le coeur du donjon !</p>
                    <p>Le Coeur du Donjon brille d'une lumiÃ¨re mystique devant vous. En le touchant, vous sentez son pouvoir ancien couler dans vos veines.</p>
                    <p>Le royaume de Valoria est sauvÃ© grÃ¢ce Ã  votre courage et votre persÃ©vÃ©rance !</p>
                    <p style="text-align: center; margin-top: 30px; font-size: 1.2em; color: #DAA520;">FÃ©licitations, hÃ©ros lÃ©gendaire !</p>
                </div>
                <div class="game-actions">
                    <button onclick="resetGame()">ğŸ”„ Nouvelle Aventure</button>
                </div>
            </div>
        </div>

        <div class="game-footer">
            <span>Le Coeur du Donjon - Un jeu inspirÃ© par Legend of the Red Dragon</span>
            <span class="save-indicator" id="saveIndicator">ğŸ’¾ SauvegardÃ©</span>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
